<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Cocos2d-html5 Hello World test</title>
    <meta name="viewport" content="initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="full-screen" content="yes"/>
    <meta name="screen-orientation" content="portrait"/>
    <meta name="x5-fullscreen" content="true"/>
    <meta name="360-fullscreen" content="true"/>
    <meta http-equiv='cache-control' content='no-cache'>
    <meta http-equiv='expires' content='0'>
    <meta http-equiv='pragma' content='no-cache'>
    <style>
        body, canvas, div {
            -moz-user-select: none;
            -webkit-user-select: none;
            -ms-user-select: none;
            -khtml-user-select: none;
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
        }
    </style>
    <link rel="stylesheet" href="./style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
            crossorigin="anonymous"></script>
</head>
<body class="no-scroll-bar" style="padding:0; margin: 0; background: #000;">
<script src="res/loading.js"></script>

<!-- Top Navi -->
<div class="top-navi">
    <h1 class="top-navi-title">Slot Editor</h1>
    
    <div class="dropdown top-navi-item">
        <button class="btn dropdown-toggle btn-dropdown-custom" type="button" data-bs-toggle="dropdown" aria-expanded="false">
            Import
        </button>
        <ul class="dropdown-menu">
            <li><a id="btnImportScene" class="dropdown-item" href="#">Import Scene</a></li>
            <li><a id="btnImportResources" class="dropdown-item" href="#">Import Resources</a></li>
        </ul>
    </div>
    <div class="dropdown top-navi-item">
        <button class="btn dropdown-toggle btn-dropdown-custom" type="button" data-bs-toggle="dropdown" aria-expanded="false">
            Export
        </button>
        <ul class="dropdown-menu">
            <li><a id="btnExportScene" class="dropdown-item" href="#">Export Scene</a></li>
            <li><a id="btnExportResources" class="dropdown-item" href="#">Export Resources</a></li>
        </ul>
    </div>

    <div id="spinner" class="spinner-border text-secondary loading-custom" role="status">
        <span class="visually-hidden">Loading...</span>
    </div>
</div>

<!-- Contents -->
<div class="flex-container no-scroll-bar">

    <div id="LeftMenu" class="flex-item left-menu">

        <div class="btn-group btn-file-group" role="group" aria-label="Basic example">
            <button type="button" class="btn btn-primary" id="btnFileAdd">파일 추가</button>
            <button type="button" class="btn btn-danger" id="btnFileDelete">파일 삭제</button>
        </div>
        <input type="file" id="inputFileAdd" class="inputFileAdd" multiple="multiple"
               onchange="handleInputFileChange(this.files)"/>

        <h5 style="font-weight: bold">Hierarchy</h5>
        <div id="hierarchy" class="hierarchy no-scroll-bar"></div>

        <h5 style="font-weight: bold; margin-top: 20px">Resources</h5>
        <div id="resourceList" class="resource-list no-scroll-bar">
            <div id="imageFolder" class="image-folder">
                <button id="btnImageFolder" class="btn-image-folder">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                         class="bi bi-folder" viewBox="0 0 16 16">
                        <path d="M.54 3.87.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.826a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31zM2.19 4a1 1 0 0 0-.996 1.09l.637 7a1 1 0 0 0 .995.91h10.348a1 1 0 0 0 .995-.91l.637-7A1 1 0 0 0 13.81 4H2.19zm4.69-1.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707z"/>
                    </svg>
                </button>
                &emsp;
                <span>Images</span>
                <div id="imageList" class="image-list"></div>
            </div>
        </div>
        <br/>
        <div class="btn-group btn-file-group" role="group" aria-label="Basic example">
            <button type="button" id="btnModalOpenNode" class="btn btn-success">
                노드 생성
            </button>
            <button type="button" class="btn btn-primary" id="btnModalOpenModule">모듈 생성</button>
        </div>
        
        <br/>
    </div>


    <canvas id="gameCanvas" width="480" height="720"></canvas>


    <div id="RightMenu" class="flex-item right-menu no-scroll-bar">
        <div class="inspector-title">
            <h1 style="color: #776B5D">Inspector</h1>
        </div>
        <div id="Inspector" class="inspector-panel no-scroll-bar">
            <div class="inspector-item-list"></div>
        </div>
        <div id="divApply" class="inspector-apply-div">
            <div class="btn-group btn-file-group" role="group" aria-label="Basic example">
                <button type="button" id="btnInspectorApply" class="btn btn-primary">적용</button>
                <button type="button" id="btnInspectorDelete" class="btn btn-danger">삭제</button>
            </div>
        </div>
    </div>

</div>

<!-- Modal Node -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Create Node</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body modal-creator-content" id="modalContent">
                <div class="modal-category-list">
                    <div class="modal-item" id="modalItemEmptyNode">
                        <img src="./res/imgNode.jpg" class="rounded modal-item-img" alt="...">
                        <h5>Empty Node</h5>
                    </div>
                    <div class="modal-item" id="modalItemArmature">
                        <img src="./res/imgArmature.jpg" class="rounded modal-item-img" alt="...">
                        <h5>Armature</h5>
                    </div>
                    <div class="modal-item" id="modalItemUIWidget">
                        <img src="./res/imgUIWidget.jpg" class="rounded modal-item-img" alt="...">
                        <h5>UIWidget</h5>
                    </div>
                </div>
                <div class="modal-item-detail" id="modalDetail">
                    <div class="modal-item-detail-panel" id="modalDetailEmptyNode">
                        <h3>Empty Node</h3>
                        <p>Name : <input type="text" id="modalInputEmptyNodeName" placeholder="Please enter node name."> </p>
                    </div>
                    <div class="modal-item-detail-panel" id="modalDetailArmature">
                        <h3>Armature</h3>
                        <p>Name : <input type="text" id="modalInputArmatureName" placeholder="Please enter node name."> </p>
                        <select class="form-select" aria-label="Default select example" id="modalARFileSelect">
                            <option selected>Select Armature File.</option>
                        </select>
                    </div>
                    <div class="modal-item-detail-panel" id="modalDetailUIWidget">
                        <h3>UIWidget</h3>
                        <p>Name : <input type="text" id="modalInputUIWidgetName" placeholder="Please enter node name."> </p>
                        <select class="form-select" aria-label="Default select example" id="modalUIWidgetFileSelect">
                            <option selected>Select UI File.</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <span id="modalWarning" class="modal-warning"></span>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" id="btnCreateNode" class="btn btn-primary">Create</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal Module -->
<div class="modal fade" id="moduleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5">Create Module</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body modal-creator-content" id="modalModuleContent">
                <div class="modal-category-list">
                    <div class="modal-item" id="modalModuleItemSlotMenu">
                        <img src="./res/imgSlotMenu.png" class="rounded modal-item-img" alt="...">
                        <h5>Slot Menu</h5>
                    </div>
                    <div class="modal-item" id="modalModuleItemJackpotNoti">
                        <img src="./res/imgJackpotNoti.png" class="rounded modal-item-img" alt="...">
                        <h5>Jackpot Noti</h5>
                    </div>
                </div>
                <div class="modal-item-detail" id="modalModuleDetail">
                    <div class="modal-item-detail-panel" id="modalModuleDetailSlotMenu">
                        <h3>SlotMenu</h3>
                    </div>
                    <div class="modal-item-detail-panel" id="modalModuleDetailJackpotNoti">
                        <select class="form-select" aria-label="Default select example" id="modalJackpotNotiUISelect">
                            <option selected>Select UI Widget File.</option>
                        </select>
                        <select class="form-select" aria-label="Default select example" id="modalJackpotNotiFxSelect">
                            <option selected>Select Win Fx AR File.</option>
                        </select>
                        <select class="form-select" aria-label="Default select example" id="modalJackpotNotiProgressSelect">
                            <option selected>Select Progress AR File.</option>
                        </select>
                        <p>Jackpot Count : <input type="number" id="modalJackpotNotiCount" /> </p>
                        <p>Jackpot Max Digit : <input type="number" id="modalJackpotNotiDigit" /> </p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <span id="modalModuleWarning" class="modal-warning"></span>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" id="btnCreateModule" class="btn btn-primary">Create</button>
            </div>
        </div>
    </div>
</div>

<!-- Toast Messages -->
<div class="toast-container position-fixed bottom-0 end-0 p-3">
    <div id="toast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header">
            <img id="toastStatus" src="..." class="rounded me-2 toast-status" alt="...">
            <strong id="toastStatusTitle" class="me-auto">SlotEditor</strong>
            <small id="toastTime">11 mins ago</small>
            <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div id="toastBody" class="toast-body">
            Hello, world! This is a toast message.
        </div>
    </div>
</div>

<script>
    (function () {
        var nav = window.navigator;
        var ua = nav.userAgent.toLowerCase();
        var uaResult = /android (\d+(?:\.\d+)+)/i.exec(ua) || /android (\d+(?:\.\d+)+)/i.exec(nav.platform);
        if (uaResult) {
            var osVersion = parseInt(uaResult[1]) || 0;
            var browserCheck = ua.match(/(qzone|micromessenger|qqbrowser)/i);
            if (browserCheck) {
                var gameCanvas = document.getElementById("gameCanvas");
                var ctx = gameCanvas.getContext('2d');
                ctx.fillStyle = '#000000';
                ctx.fillRect(0, 0, 1, 1);
            }
        }
    })();
</script>
<script src="frameworks/cocos2d-html5/CCBoot.js"></script>
<script cocos src="main.js"></script>
<script src="src/Handlers/windowHandler.js"></script>
<script src="src/Handlers/InspectorHandler.js"></script>
<script src="src/Handlers/hierarchyHandler.js"></script>
<script src="src/Handlers/modalNodeHandler.js"></script>
<script src="src/Handlers/modalModuleHandler.js"></script>
<script src="src/Handlers/ExportHandler.js"></script>
<script src="src/Handlers/ImportHandler.js"></script>

</body>
</html>
